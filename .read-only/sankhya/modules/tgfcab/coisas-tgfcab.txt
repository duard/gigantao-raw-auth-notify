Introdu√ß√£o
√â necess√°rio para a personaliza√ß√£o de um projeto comercial, al√©m de conhecer as regras de neg√≥cios, a estrutura do banco de dados.

Deter conhecimento sobre as tabelas associadas e as liga√ß√µes entre os campos √© importante para extrair bons resultados Definir a tabela principal e os principais campos de relacionamento √© o primeiro passo para a constru√ß√£o de um DER que verifica o volume de vendas, por exemplo.

O DER abaixo representa as rela√ß√µes entre as tabelas utilizadas para analisar as vendas por produto, com a principal tabela sendo a TGFCAB, juntamente com a TGFITE, que cont√©m as informa√ß√µes pertinentes aos produtos, quantidades e os valores atribu√≠dos.

As duas inst√¢ncias, apresentam todas chaves estrangeiras (FK) necess√°rias para realiza√ß√£o das liga√ß√µes pertinentes aos processos.

O processo de compras e venda s√£o similares e grande parte das inst√¢ncias s√£o utilizadas nos dois processos. A diferencia√ß√£o fica por alguns pontos como:

parametriza√ß√µes nos campos da tabela TGFTOP;
uso das inst√¢ncia de pre√ßos TGFTAB e TGFEXC para vendas;
uso das inst√¢ncia de pre√ßos TGFCUS e TGFCUSITE para compras;
O DER apresenta o seguinte conjunto de tabelas:

TGFCAB
TGFTOP
TGFITE
TGFPRO
TGFGRU
TGFVEN
TGFPAR
TGFTAB
TGFEXC
TGFCUS
TGFCUSITE
TGFTPV
TGFLOC
TGFEST
TGFVAR

TGFCAB
A TGFCAB √© a inst√¢ncia que corresponde ao cabe√ßalho da nota, e recebe grande parte das chaves estrangeiras (FK) de outras tabelas relacionadas a ela. Ligada a ela, atrav√©s da chave prim√°ria NUNOTA, temos a TGFITE. Essa liga√ß√£o permite ao usu√°rio elaborar uma vis√£o, tanto do prisma comercial, financeiro ou gerencial.

A TGFCAB possui campos de datas importantes, como por exemplo:

DTNEG - quando utilizado em opera√ß√µes de vendas, indica data de negocia√ß√£o da opera√ß√£o de sa√≠da. J√° em opera√ß√µes de compras, √© preenchido com a data de emiss√£o da nota de compra emitida pelo fornecedor.

DTENTSAI - usualmente utilizado em opera√ß√µes de compras, indicando o registro do dia em que a nota de compra √© lan√ßado no ERP Sankhya.

DTMOV - √© usado com o mesmo intuito do campo DTENTSAI, por√©m, mais utilizado em opera√ß√µes cont√°beis (registros cont√°beis) e atualiza√ß√£o de estoque, registrando a entrada de estoque no dia indicado, dentro do ERP Sankhya.




Nome da Coluna	Descri√ß√£o do Campo	Tipo de Dado	NULO	DEFAULT
NUNOTA (PK)	N√∫mero √önico	NUMBER (10)	N	(null)
CODEMP (FK)	C√≥digo Empresa	NUMBER (5)	N	(null)
CODCENUS (FK)	C√≥digo do Centro de Resultado	NUMBER (10)	N	0
NUNNOTA	N√∫mero da Nota	VARCHAR2	N	(null)
DTNEG	Data Negocia√ß√£o	DATE	N	(null)
DTFATUR	Data de Faturamento	DATE	S	(null)
DTENTSAI	Data de Entrada e Sa√≠da	DATE	S	(null)
CODPARC	C√≥digo do Parceiro	NUMBER (10)	N	0
CODTIPOPER	Tipo de Opera√ß√£o	NUMBER (5)	N	(null)
DHTIPOPER	Data de Altera√ß√£o da tabela TGFTOP	DATE	N	(null)
TIPMOV	Tipo de Movimento	VARCHAR2	N	'P'
CODTIPVENDA (FK)	C√≥digo de Tipo de Negocia√ß√£o	NUMBER (5)	N	0
DHTIPVENDA (FK)	Data de Altera√ß√£o do Tipo de Negocia√ß√£o	DATE	N	TO_DATE('01/01/1998', 'DD/MM/YYYY')
CODVEND	C√≥digo do Vendedor	NUMBER	N	0
OBSERVACAO	Observa√ß√µes	VARCHAR2	S	(null)
VLOUTROS	Outros Valores	FLOAT (126)	N	0
VLRDESCTOT	Desconto no Total	FLOAT (126)	N	0
VLRDESCTOTITEM	Valor de Desconto nos Itens	FLOAT (126)	N	0
VLRFRETE	Valor de Frete	FLOAT (126)	N	0
TIPFRETE	Tipo de Frete	VARCHAR2	N	'S'
VLRNOTA	Valor da Nota	FLOAT (126)	N	0
ORDEMCARGA	Ordem de carga	NUMBER (10)	N	(null)
CODPARCTRANSP	C√≥digo do Parceiro Transportador	NUMBER (10)	N	0
BASEICMS	Base ICMS	FLOAT (126)	N	0
VLRICMS	Valor ICMS	FLOAT (126)	N	0
BASEIPI	Base IPI	FLOAT (126)	N	0
VLRIPI	Valor do IPI	FLOAT (126)	N	0
STATUSNOTA	Status da Nota	VARCHAR2	N	'P'
PERCDESC	Percentual de Desconto	FLOAT (126)	N	0
CODNAT	C√≥digo de Natureza	NUMBER (10)	N	0
CHAVENFE	Chave NF-e	VARCHAR2	N	(null)
STATUSNFE	Status NF-e	VARCHAR2	N	(null)






TGFTOP
Inst√¢ncia onde ocorre a parametriza√ß√µes dos processos de entradas ou sa√≠das, registros financeiros e movimentos de estoque. A liga√ß√£o entre a TGFTOP e a TGFCAB apresenta pontos importantes, que devem ser analisados:

relacionamento entre o campo DHTIPOPER da tabela TGFCAB e o campo DHALTER da tabela TGFTOP.

liga√ß√£o entra a chave estrangeira CODTIPOPER da tabela TGFCAB e a chave prim√°ria do campo CODTIPOPER da tabela TGTOP.




O detalhe importante que existe na TGFTOP √© que ela √© conhecida como uma tabela hist√≥rica, guardando cada parametriza√ß√£o atrav√©s do campo DHALTER da TGFTOP, logo cada vendas ir√° registrar as parametriza√ß√µes criadas com o decorrer do tempo.

Por exemplo: Se parametrizarmos a TGFTOP de venda para n√£o gerar financeiro e criarmos uma venda no Portal de Vendas, essa nota n√£o ir√° gerar o financeiro, e no campo DHTIPOPER da TGFCAB estar√° o registro da data e hora em que essa parametriza√ß√£o foi realizada.

Se voltarmos na TGFTOP e alterarmos para que ela gere financeiro como receita, o campo DHALTER registrar√° a data e hora dessa nova parametriza√ß√£o e todas as pr√≥ximas vendas realizadas come√ßar√£o a gerar financeiro do tipo receita. Por√©m a venda realizada na parametriza√ß√£o anterior permanecer√° imut√°vel, pois a parametriza√ß√£o anterior permaneceu igual e a venda realizada naquele momento dizia que n√£o geraria financeiro.

Isso √© o efeito hist√≥rico que essa tabela possui, sendo poss√≠vel o registro de todas as parametriza√ß√µes realizadas no decorrer do tempo.

SQL

FROM
TGFCAB CAB
inner join TGFTOP TPO on CAB.CODTIPOPER = TPO.CODTIPOPER and CAB.DHTIPOPER = TPO.DHALTER üü¢üü¢üü¢
Nome da Coluna	Descri√ß√£o do Campo	Tipo de Dado	NULO	DEFAULT
CODTIPOPER (PK)	C√≥digo Tipo de Opera√ß√£o	NUMBER (5)	N	(null)
DHALTER (PK)	Data Altera√ß√£o	DATE	N	(null)
DESCROPER	Descri√ß√£o Tipo de Opera√ß√£o	VARCHAR2	N	(null)
TIPMOV	Tipo de Movimento	VARCHAR2	N	'P'
ATUALFIN	Atualiza Financeiro	NUMBER (5)	Y	0
TIPATUALFIN	Tipo de Atualiza√ß√£o do Financeiro	VARCHAR2	Y	'I'
ATUALCOM	Atualiza Comiss√£o	VARCHAR2	N	'N'
ATUALEST	Atualiza Estoque	VARCHAR2	Y	'N'
GOLSINAL	Gerente Online Sinal	NUMBER (5)	N	0
GOLDEV	Gerente Online Devolu√ß√£o	NUMBER (5)	N	1
NFE	NF-e	VARCHAR2	Y	(null)
TGFITE
Nessa inst√¢ncia tem-se informa√ß√µes das quantidades negociadas, atrav√©s do campo QTDNEG e do pre√ßo de venda do produto, atrav√©s do campo VLRUNIT. O resultado dessa opera√ß√£o resulta no VLRTOT.

üìò
Informa√ß√µes Importantes

Utiliza-se o campo VLRTOT para determinar o valor total dos itens negociados, ao inv√©s de realizar a multiplica√ß√£o dos campos QTDNEG e VLRUNIT.

Para se obter o valor total l√≠quido da venda do produto, utiliza-se o desconto atribu√≠do ao item, realizando a subtra√ß√£o dos campos (VLRTOT ‚Äì VLRDESC).

SQL

FROM
TGFCAB CAB
inner join TGFTOP TPO on CAB.CODTIPOPER = TPO.CODTIPOPER and CAB.DHTIPOPER = TPO.DHALTER
inner join TGFITE ITE on CAB.NUNOTA = ITE.NUNOTA üü¢üü¢üü¢
Nome da Coluna	Descri√ß√£o do Campo	Tipo de Dado	NULO	DEFAULT
NUNOTA (PK)	N√∫mero √önico	NUMBER (10)	N	(null)
SEQUENCIA (PK)	Sequ√™ncia	NUMBER (5)	N	(null)
CODEMP (FK)	C√≥digo de Empresa	NUMBER (5)	N	(null)
CODPROD (FK)	C√≥digo de Produto	NUMBER (10)	N	(null)
CODLOCALORIG (FK)	C√≥digo Local Origem	NUMBER (10)	N	0
CONTROLE	Controle	VARCHAR2	N	..
CODCFO (FK)	C√≥digo de CFOP	NUMBER (10)	N	0
QTDNEG	Quantidade Negociada	FLOAT (126)	N	0
QTDENTREGUE	Quantidade Entregue	FLOAT (126)	N	0
VLRUNIT	Valor Unit√°rio	FLOAT (126)	N	0
VLRTOT	Valor Total	FLOAT (126)	N	0
BASEIPI	Base de IPI	FLOAT (126)	N	0
VLRIP	Valor de IPI	FLOAT (126)	N	0
VLRICMS	Valor ICMS	FLOAT (126)	N	0
VLRDESC	Valor Desconto	FLOAT (126)	N	0
ALIQICMS	Al√≠quota de ICMS	FLOAT (126)	Y	(null)
ALIQIPI	Al√≠quota de IPI	FLOAT (126)	Y	(null)
PENDENTE	Pendente	VARCHAR2	N	'S'
CODVOL (FK)	C√≥digo de Volume	VARCHAR2	N	'0'
CODTRIB	C√≥digo de Tributa√ß√£o	NUMBER (5)	Y	(null)
PERCDESC	Percentual de Desconto	FLOAT (126)	N	0
TGFPRO
Inst√¢ncia respons√°vel por centralizar informa√ß√µes a respeito dos produtos inseridos no ERP Sankhya. Para trazer informa√ß√µes do cadastro de produtos, relaciona-se a chave estrangeira CODPROD da tabela TGFITE com a chave prim√°ria CODPROD da tabela TGFPRO. Ao realizar essa a√ß√£o se obt√©m informa√ß√µes como a descri√ß√£o do produto e sua marca.

SQL

FROM
TGFCAB CAB
inner join TGFTOP TPO on CAB.CODTIPOPER = TPO.CODTIPOPER and CAB.DHTIPOPER = TPO.DHALTER
inner join TGFITE ITE on CAB.NUNOTA = ITE.NUNOTA
inner join TGFPRO PRO on ITE.CODPROD = PRO.CODPROD üü¢üü¢üü¢
Nome da Coluna	Descri√ß√£o da Coluna	Tipo de Dado	NULO	DEFAULT
CODPROD (PK)	C√≥digo do Produto	NUMBER (10)	Y	(null)
DESCRPROD	Descri√ß√£o do Produto	VARCHAR2	N	(null)
REFERENCIA	Refer√™ncia	VARCHAR2	Y	(null)
CODGRUPOPROD	C√≥digo do Grupo de Produto	NUMBER (10)	N	(null)
CODVOL	C√≥digo do Volume	VARCHAR2	N	(null)
MARCA	Marca	VARCHAR2	Y	(null)
COMVEND	Comiss√£o de Venda	FLOAT (126)	Y	(null)
DESCMAX	Desconto M√°ximo	FLOAT (126)	Y	(null)
USOPROD	Usado Como	VARCHAR2	Y	'V'
TIPOCONTEST	Tipo de Controle de Estoque	VARCHAR2	Y	'N'
ESTMAX	Estoque M√°ximo	FLOAT (126)	Y	(null)
ESTMIN	Estoque M√≠nimo	FLOAT (126)	Y	(null)
CODPARCFORN (FK)	C√≥digo Parceiro Fornecedor	NUMBER (10)	Y	(null)
REFFORN	Refer√™ncia do Fornecedor	VARCHAR2	Y	(null)
NCM	NCM	VARCHAR2	Y	(null)
CODLOCALPADRAO	C√≥digo do Local Padr√£o	NUMBER (10)	Y	(null)
TGFGRU
Atrav√©s do relacionamento da inst√¢ncia TGFPRO, √© poss√≠vel relacionar o grupo de produto, trazendo informa√ß√µes como a descri√ß√£o do grupo em que ele est√° inserido. O processo se d√° atrav√©s da chave estrangeira CODGRUPOPROD da tabela TGFPRO com a chave prim√°ria CODGRUPOPROD da tabela TGFGRU.

SQL

FROM
TGFCAB CAB
inner join TGFTOP TPO on CAB.CODTIPOPER = TPO.CODTIPOPER and CAB.DHTIPOPER = TPO.DHALTER
inner join TGFITE ITE on CAB.NUNOTA = ITE.NUNOTA
inner join TGFPRO PRO on ITE.CODPROD = PRO.CODPROD
inner join TGFGRU GRU on PRO.CODGRUPOPROD = GRU.CODGRUPOPROD üü¢üü¢üü¢
Nome da Coluna	Descri√ß√£o da Coluna	Tipo de Dado	NULO	DEFAULT
CODGRUPOPROD	C√≥digo do Grupo de Produto	NUMBER (10)	N	(null)
DESCRGRUPOPROD	Descri√ß√£o do Grupo de Produto	VARCHAR2	N	(null)
CODGRUPAI	C√≥digo do Grupo Pai	NUMBER (10)	N	(null)
GRAU	Grau	NUMBER (5)	N	(null)
TGFVEN
Nas vendas realizadas, obt√©m-se o registro do vendedor atrav√©s do campo CODVEND da TGFCAB. Para se ter o nome do vendedor (campo APELIDO), √© necess√°rio realizarmos a liga√ß√£o da chave estrangeira CODVEND da TGFCAB com a chave prim√°ria CODVEND da TGFVEN.

SQL

FROM
TGFCAB CAB
inner join TGFTOP TPO on CAB.CODTIPOPER = TPO.CODTIPOPER and CAB.DHTIPOPER = TPO.DHALTER
inner join TGFITE ITE on CAB.NUNOTA = ITE.NUNOTA
inner join TGFPRO PRO on ITE.CODPROD = PRO.CODPROD
inner join TGFGRU GRU on PRO.CODGRUPOPROD = GRU.CODGRUPOPROD
inner join TGFVEN VEN on CAB.CODVEND = VEN.CODVEND üü¢üü¢üü¢
Nome da Coluna	Descri√ß√£o da Coluna	Tipo de Dado	NULO	DEFAULT
CODVEND (PK)	C√≥digo do Vendedor	NUMBER (5)	N	(null)
TIPVEND	Tipo de Vendedor	VARCHAR2	Y	(null)
APELIDO	Apelido	VARCHAR2	N	(null)
CODPARC (FK)	C√≥digo do Parceiro	NUMBER (10)	N	0
COMVENDA	Comiss√£o de Venda	FLOAT (126)	Y	(null)
COMGER	Comiss√£o de Gerente	FLOAT (126)	Y	(null)
CODEMP (FK)	C√≥digo da Empresa	NUMBER (5)	Y	(null)
TGFPAR
A inst√¢ncia de parceiros se relaciona com a tabela TGFCAB atrav√©s da chave estrangeira CODPARC, ligando-as atrav√©s da chave prim√°ria CODPARC da tabela TGFPAR.

SQL

FROM
TGFCAB CAB
inner join TGFTOP TPO on CAB.CODTIPOPER = TPO.CODTIPOPER and CAB.DHTIPOPER = TPO.DHALTER
inner join TGFITE ITE on CAB.NUNOTA = ITE.NUNOTA
inner join TGFPRO PRO on ITE.CODPROD = PRO.CODPROD
inner join TGFGRU GRU on PRO.CODGRUPOPROD = GRU.CODGRUPOPROD
inner join TGFVEN VEN on CAB.CODVEND = VEN.CODVEND
inner join TGFPAR PAR on CAB.CODPARC = PAR.CODPARC üü¢üü¢üü¢
Nome da Coluna	Descri√ß√£o da Coluna	Tipo de Dado	NULO	DEFAULT
CODPARC (PK)	C√≥digo do Parceiro	NUMBER (10)	N	(null)
NOMEPARC	Nome do Parceiro	VARCHAR2	N	(null)
RAZAOSOCIAL	Raz√£o Social	VARCHAR2	Y	(null)
TIPPESSOA	Tipo de Pessoa	VARCHAR2	N	(null)
CODEND (FK)	C√≥digo do Endere√ßo	NUMBER (10)	N	0
NUMEND	N√∫mero	VARCHAR2	Y	(null)
CODBAI (FK)	C√≥digo do Bairro	NUMBER (10)	N	0
CODCID (FK)	C√≥digo da Cidade	NUMBER (10)	N	0
CEP	CEP	VARCHAR2	Y	(null)
TELEFONE	Telefone	VARCHAR2	Y	(null)
EMAIL	E-mail	VARCHAR2	Y	(null)
DTNASCIMENTO	Data de Nascimento	DATE	Y	(null)
IDENTINSCESTAD	Identidade/Inscri√ß√£o Estadual	VARCHAR2	Y	(null)
CGC_CPF	CNJP/CPF	VARCHAR2	Y	(null)
CODTAB (FK)	C√≥digo da Tabela de Pre√ßo	NUMBER (5)	Y	(null)
CLIENTE	Nome Cliente	VARCHAR2	N	'S'
FORNECEDOR	Fornecedor	VARCHAR2	N	'N'
LIMCRED	Limite de Cr√©dito	FLOAT (126)	Y	(null)
SEXO	Sexo	VARCHAR2	Y	(null)
TGFTAB
Nome da Coluna	Descri√ß√£o da Coluna	Tipo de Dado	NULO	DEFAULT
NUTAB (PK)	C√≥digo da Tabela de Pre√ßo	NUMBER (10)	N	0
CODTAB	C√≥digo da Tabela de Pre√ßo	NUMBER (5)	N	0
DTVIGOR	Data de Vigor	DATE	N	(null)
DTALTER	Data de Altera√ß√£o	DATE	N	(null)
PERCENTUAL	Percentual	FLOAT (126)	Y	(null)
CODTABORIG	C√≥digo da Tabela de Pre√ßo Origem	NUMBER (10)	Y	0
TGFEXC
Nome da Coluna	Descri√ß√£o da Coluna	Tipo de Dado	NULO	DEFAULT
NUTAB (PK)	C√≥digo da Tabela de Pre√ßo	NUMBER (10)	N	0
CODPROD (PK)	C√≥digo do Produto	NUMBER (10)	N	0
CODLOCAL (PK)	C√≥digo do Local	NUMBER (10)	N	0
CONTROLE (PK)	Controle	VARCHAR2	N	' '
VLRVENDA	Pre√ßo	FLOAT (126)	N	'V'
TIPO	Tipo	VARCHAR2	Y	(null)
TGFCUS
Na parametriza√ß√£o do processo de compras √© comum criarmos f√≥rmulas em que os valores de custos fiscais e gerenciais s√£o formados automaticamente.

Isso ocorre atrav√©s da inser√ß√£o do hist√≥rico das entradas (de acordo com a empresa, local ou controle e regras de neg√≥cio do parceiro) a tabela TGFCUS.

A inst√¢ncia TGFCUS apresenta os valores de custos registrados, estes formados pelas f√≥rmulas de custo e pre√ßo.

SQL

FROM
TGFCAB CAB
inner join TGFITE ITE on CAB.NUNOTA = ITE.NUNOTA
inner join TGFCUSITE CUS on ITE.NUNOTA = CUS.NUNOTA AND ITE.SEQUENCIA = CUS.SEQUENCIA üü¢üü¢üü¢
Nome da Coluna	Descri√ß√£o da Coluna	Tipo de Dado	NULO	DEFAULT
CODPROD (PK) (FK)	N√∫mero √önico	NUMBER (10)	N	0
CODEMP (PK) (FK)	C√≥digo Empresa	NUMBER (5)	N	0
DTATUAL (PK)	Data Atual	DATE	N	(null)
CODLOCAL (PK) (FK)	Local	NUMBER (10)	N	0
CONTROLE (PK)	Controle	VARCHAR2	N	' '
CUSMEDICM	Custo M√©dio com ICMS	FLOAT (126)	N	0
CUSSEMICM	Custo M√©dio sem ICMS	FLOAT (126)	N	0
CUSREP	Custo de Reposi√ß√£o	FLOAT (126)	N	0
CUSVARIAVEL	N√∫mero √önico	FLOAT (126)	N	0
CUSGER	Sequ√™ncia	FLOAT (126)	N	0
CUSMED	Custo de Reposi√ß√£o	FLOAT (126)	N	0
ENTRADACOMICMS	√öltimo Custo sem ICMS	FLOAT (126)	N	0
ENTRADASEMMICMS	√öltimo Custo com ICMS	FLOAT (126)	N	0
NUNOTA	N√∫mero √önico	NUMBER (10)	N	0
SEQUENCIA	Sequ√™ncia	NUMBER (5)	N	0
TGCUSITE
A inst√¢ncia TGFCUSITE, corresponde ao custo por item, apresenta os mesmos registros presentes na TGFCUS, por√©m aqui s√£o apresentados somente os itens de uma compra lan√ßada, possibilitando a busca de notas atrav√©s da chave prim√°ria composta NUNOTA e SEQUENCIA.

Nome da Coluna	Descri√ß√£o da Coluna	Tipo de Dado	NULO	DEFAULT
NUNOTA (PK)	N√∫mero √önico	NUMBER (10)	N	0
SEQUENCIA (PK)	Sequ√™ncia	NUMBER (5)	N	0
CODPROD (PK)	C√≥digo Produto	NUMBER (10)	N	0
CODEMP	C√≥digo Empresa	NUMBER (5)	N	0
CODLOCAL	Data Atual	NUMBER (5)	N	0
CONTROLE	Local	VARCHAR2	N	' '
DTATUAL	Controle	DATE	N	(null)
CUSGER	Custo M√©dio com ICMS	FLOAT (126)	N	0
CUSVARIAVEL	Custo M√©dio sem ICMS	FLOAT (126)	N	0
DUSREP	Custo de Reposi√ß√£o	FLOAT (126)	N	0
ENTRADACOMICMS	N√∫mero √önico	FLOAT (126)	N	0
ENTRADASEMICMS	Sequ√™ncia	FLOAT (126)	N	0
TGFTPV
Na inst√¢ncia de tipos de negocia√ß√µes est√£o cadastradas as formas de pagamentos utilizadas nas opera√ß√µes em que existam financeiro. Ela apresenta a mesma caracter√≠stica de armazenamento hist√≥rico, registrando historicamente cada altera√ß√£o realizada, inserindo uma nova linha de acordo com a data de altera√ß√£o utilizando o campo.

üìò
Dica Importante

Ao iniciar uma nota de venda ou compra, se for necess√°rio realizar alguma altera√ß√£o no tipo de negocia√ß√£o, exclui-se a nota e cria-se uma nova. Isso garante que as altera√ß√µes ocorram, pois na TGFCAB tamb√©m √© registrado a data de altera√ß√£o do tipo de negocia√ß√£o, atrav√©s do campo DHTIPVENDA.

Nome da Coluna	Descri√ß√£o da Coluna	Tipo de Dado	NULO	DEFAULT
CODTIPVENDA (PK)	C√≥digo do Tipo de Venda	NUMBER (5)	N	0
DHALTER (PK)	Data e hora altera√ß√£o	Date	N	(null)
DESCRTIPVENDA	Descri√ß√£o	VARCHAR2	N	(null)
SUBTIPOVENDA	Subtipo	VARCHAR2	N	(null)
VENDAMIN	Valor m√≠nimo para venda	FLOAT (126)	Y	(null)
TAXAJURO	Taxa em %	FLOAT (126)	Y	(null)
DESCMAX	% Desconto M√°ximo	FLOAT (126)	Y	(null)
DESCPROM	Desconto Promocional	VARCHAR2	Y	'S'
PRAZOMIN	Prazo M√≠nimo	NUMBER (5)	Y	(null)
TGFLOC
Na inst√¢ncia TGFLOC, s√£o cadastrados os espa√ßos f√≠sicos ou gerenciais em que produtos s√£o armazenados.
Dividem-se em dois grupos:

F√≠sicos: armaz√©ns, dep√≥sitos ou a pr√≥pria empresa;
Gerencial: avaria, separa√ß√£o ou site;
O local de armazenamento, pode ser lan√ßado em opera√ß√µes de compra e vendas. Em compras, √© realizado no processo de entrada de estoque no local selecionado, enquanto em vendas, quando h√° baixa de estoque.

Uma terceira op√ß√£o √© quando h√° transfer√™ncia de estoque, que realiza as duas opera√ß√µes (compras/vendas) ao mesmo tempo e em locais distintos.

Nome da Coluna	Descri√ß√£o da Coluna	Tipo de Dado	NULO	DEFAULT
CODLOCAL (PK)	C√≥digo do Tipo de Venda	Number (10)	N	(null)
DESCRLOCAL	Descri√ß√£o	VARCHAR2	N	(null)
ANALITICO	Anal√≠tico	VARCHAR2	N	'S'
GRAU	Grau	Number (5)	N	(null)
TGFEST
A inst√¢ncia TFGEST (estoque) registra as quantidades que cada produto possui armazenado, podendo esse estoque ser detalhado por suas chaves prim√°rias.

A parametriza√ß√£o podendo ocorrer por empresa, local, controle, parceiro e tipo (pr√≥prio do parceiro ou de terceiros).

Nome da Coluna	Descri√ß√£o da Coluna	Tipo de Dado	NULO	DEFAULT
CODEMP (PK) (FK)	C√≥digo da Empresa	NUMBER (5)	N	0
CODLOCAL (PK) (FK)	C√≥digo do Local	NUMBER (10)	N	0
CODPROD (PK) (FK)	C√≥digo do Produto	NUMBER (10)	N	0
CONTROLE (PK)	Controle	VARCHAR2	N	' '
RESERVADO	Reservado	FLOAT (126)	S	0
ESTMIN	Estoque M√≠nimo	FLOAT (126)	N	0
ESTMAX	Estoque M√°ximo	FLOAT (126)	N	0
DTVAL	Data de Validade	DATE	S	(null)
TIPO (PK)	Tipo	VARCHAR2	N	'P'
CODPARC (PK) (FK)	C√≥digo do Parceiro	NUMBER (10)	N	0
ESTOQUE	Estoque	FLOAT (126)	N	0
DTFABRICACAO	Data de Fabrica√ß√£o	DATE	S	(null)
TGFVAR
Inst√¢ncia que realiza a liga√ß√£o entre or√ßamentos e pedidos, pedidos e notas, notas e devolu√ß√µes. Ela utiliza os campos NUNOTAORIG (n√∫mero √∫nico de origem) e o NUNOTA (n√∫mero √∫nico destino), al√©m dos campos SEQUENCIAORIG e SEQUENCIA.

Ela √© utilizada para registrar tamb√©m os poss√≠veis v√°rios faturamentos parciais que possam ocorrer entre pedidos e notas, como tamb√©m de notas e devolu√ß√µes.

Por exemplo, no ato da gera√ß√£o de um pedido de venda, a empresa pode n√£o ter todos os itens no ato da venda e negociar com o cliente o faturamento parcial apenas dos produtos em estoque.

Logo um √∫nico pedido pode ser faturado em v√°rias notas de venda, com isso, a TGFVAR ter√° v√°rios n√∫meros √∫nicos de destino (vendas) para apenas um n√∫mero √∫nico de origem (o pedido de venda).

Nome da Coluna	Descri√ß√£o da Coluna	Tipo de Dado	NULO	DEFAULT
NUNOTA	N√∫mero √önico	NUMBER (10)	N	0
SEQUENCIA	Sequ√™ncia	NUMBER (5)	N	0
NONOTAORIG	N√∫mero √önico Origem	NUMBER (10)	N	0
SEQUENCIAORIG	Sequ√™ncia Origem	NUMBER (5)	N	0
QTDATENDIDA	Quantidade Atendida	FLOAT (126)	S	(null)
STATUSNOTA	Status da Nota	VARCHAR2	N	'P'
Dicas para cria√ß√£o de relat√≥rios
No processo de cria√ß√£o relat√≥rios para parceiros Sankhya, deve-se ter em mente que grande parte n√£o ser√° poss√≠vel o reaproveitamento, pois existe nuances espec√≠ficas para cada neg√≥cio. Indica-se realizar um levantamento com os usu√°rios que ir√£o utilizar os relat√≥rios, e documentar os detalhes a fim de validar o escopo.

üìò
Dica Importante

Em processos comerciais(compra ou venda) √© necess√°rio relacionar as condi√ß√µes dos filtros de vendedor, grupo de produtos e parceiros, tendo como requisito funcional a n√£o obrigatoriedade desses filtros.

Na realiza√ß√£o de queries para consulta, dentro cl√°usula WHERE, deve-se colocar a seguinte sequ√™ncia:

campo a ser filtrado seguido do operador de igualdade;
par√¢metro seguido do operador booleano OR seguido da condi√ß√£o IS NULL;
Tudo deve ser realizado dentro de par√™nteses visto que h√° envolvimento do operador l√≥gico OR.

SQL

WHERE
	CAB.DTNEG BETWEEN :PERIODOINI and :PERIODOFIN
	AND (CAB.CODVEND = :CODVEND or :CODVEND IS NULL)üü¢üü¢üü¢
	AND (CAB.CODPARC = :CODPARC or :CODPARC IS NULL)üü¢üü¢üü¢
	AND (PRO.CODGRUPOPROD = :CODGRUPOPROD or :CODGRUPOPROD IS NULL)üü¢üü¢üü¢